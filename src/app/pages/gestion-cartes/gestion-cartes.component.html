<div class="container">
    <aside class="sidebar">
      <app-sidebar></app-sidebar>
    </aside>
    
    <main class="main-content">
      <div class="card">
        <!-- Header -->
        <div class="header">
          <h1>Gestion des Cartes</h1>
          <div class="header-buttons">
            <button class="btn-delete" [disabled]="!hasSelection" (click)="deleteSelected()">
              <i class="fas fa-trash-alt"></i>Supprimer
            </button>
            <button class="btn-add" (click)="addCard()">
              <i class="fas fa-plus"></i>Ajouter
            </button>
          </div>
        </div>
  
        <!-- Search Bar -->
        <div class="search-section">
          <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input 
              type="text" 
              [(ngModel)]="searchTerm"
              (input)="onSearch()"
              placeholder="Rechercher par Code Carte, Nom, Prenom..." 
              class="search-input"
            />
          </div>
          <button class="btn-filter">
            <i class="fas fa-filter"></i>Filtre
          </button>
        </div>
  
        <!-- Table -->
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>
                  <input type="checkbox" 
                         [checked]="allSelected"
                         (change)="toggleAllSelection()"/>
                </th>
                <th>Code Carte</th>
                <th>Prénom et Nom</th>
                <th>Rôle</th>
                <th>Status</th>
                <th>Actions</th>
                <th>Recharger</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let card of filteredCartes">
                <td>
                  <input type="checkbox" [(ngModel)]="card.selected"/>
                </td>
                <td>{{card.codeCarte}}</td>
                <td>{{card.prenom}} {{card.nom}}</td>
                <td>{{card.role}}</td>
                <td>
                  <span [class]="'status ' + (card.status === 'Active' ? 'status-active' : 'status-inactive')">
                    {{card.status}}
                  </span>
                </td>
                <td>
                  <div class="actions">
                    <button class="btn-action edit" (click)="editCard(card)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn-action view" (click)="viewCard(card)">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn-action delete" (click)="deleteCard(card)">
                      <i class="fas fa-trash"></i>
                    </button>
                    <button class="btn-action settings">
                      <i class="fas fa-cog"></i>
                    </button>
                  </div>
                </td>
                <td>
                  <button class="btn-recharge" (click)="rechargeCard(card)">
                    <i class="fas fa-wallet"></i>Recharger
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>
